% Parameters
%
% 1: dimension (in cm)
% 2: board size (square)
% 
% Example: A 19x19 board with size 10cm x 10cm: `\calculateStep{10}{19}`
\newcommand{\calculateStep}[2]{
  \pgfmathsetmacro{\step}{#1 / (#2 - 1)} % chktex 1
}

\newif\ifcoords

\pgfkeys{/phili/goGrid/.cd, 
  board dimension/.store in = \boardDimension,
  board size/.store in      = \boardSize,
  board dimension           = 10cm,
  board size                = 19,
  coords/.is if             = coords,
}

% Parameters
%
% - board dimension (in cm)
% - board size (square)
% 
% Example: A 19x19 board with size 10cm x 10cm:
%
% ```tex
% \goGrid[board dimension = 10,
%         board size      = 9
% ]
% ```
\newcommand{\goGrid}[1][]{
  \pgfkeys{/phili/goGrid/.cd, #1}

  \calculateStep{\boardDimension}{\boardSize}

  \draw[step=\step] (0, 0) grid
    (\boardDimension, \boardDimension);
  
  \boardOutline{\boardDimension}
  
  \ifcoords
    \coordinates{\boardDimension}{\boardSize}{\step}
  \fi

  \drawHoshis{\boardDimension}{\boardSize}{\step}
}

% Parameters
%
% 1: dimension (in cm)
% 2: board size (square)
% 3: step
% 
% Example: A 19x19 board with size 10cm x 10cm: `\drawHoshis{10}{19}{\step}`
\newcommand{\drawHoshis}[3]{
  \ifnum#2=9\relax
    \foreach \sloc in {{3, 3}, {3, 7}, {7, 3}, {7, 7}, {5, 5}}{
      \pgfmathsetmacro{\hoshiCoordX}{\step * ({\sloc}[0] - 1)}
      \pgfmathsetmacro{\hoshiCoordY}{\step * ({\sloc}[1] - 1)}

      \filldraw (\hoshiCoordX, \hoshiCoordY)
        circle [radius=\step / 10];
    }
  \fi
  % TODO: if bigger than 9x9, then it should be mathematically calculated...
  %       Even at 9x9, at least the 4 outer hoshis can be mathematically calculated (though they are the 3-3, not the 4-4).
}

% Parameters
%
% 1: dimension (in cm)
% 
% Example: `\boardOutline{10}`
\newcommand{\boardOutline}[1]{
  \pgfmathsetmacro{\boardOutlineLineWidth}{#1 * 5 / 1000}
  % Just so the board outline isn't jagged
  \pgfmathsetmacro{\boardOutlinePadding}{\boardOutlineLineWidth / 2}

  % Top
  \draw[black, line width = \boardOutlineLineWidth]
    (-\boardOutlinePadding, #1) -- (#1 + \boardOutlinePadding, #1); % chktex 1 chktex 8
  % Right
  \draw[black, line width = \boardOutlineLineWidth] 
    (#1, 0) -- (#1, #1); % chktex 8
  % Bottom
  \draw[black, line width = \boardOutlineLineWidth]
    (-\boardOutlinePadding, 0) -- (#1 + \boardOutlinePadding, 0); % chktex 1 chktex 8
  % Left
  \draw[black, line width = \boardOutlineLineWidth]
    (0, 0) -- (0, #1); % chktex 8
}

\newcounter{coordinateCounter}
\setcounter{coordinateCounter}{1}
% Parameters
%
% 1: dimension (in cm)
% 2: board size (square)
% 3: step
% 
% Example: A 19x19 board with size 10cm x 10cm: `\coordinates{10}{19}{\step}`
\newcommand{\coordinates}[3]{
  \pgfmathsetmacro{\leftRightShift}{#3cm / 1.4}
  \pgfmathsetmacro{\topBottomShift}{#3cm / 1.5}

  \foreach [count=\i] \l in {A, B, ..., Z} {
    \ifthenelse{\equal{\l}{I} \OR \i > \numexpr #2 + 1 \relax}{}{
      \pgfmathsetmacro{\coordinateShift}{#3cm * (\thecoordinateCounter - 1)}

      % Top
      \draw[
        xshift = \coordinateShift,
        yshift = #1cm + \topBottomShift,
      ] node {\l};
      % Right
      \draw[
        xshift = #1cm + \leftRightShift,
        yshift = \coordinateShift,
      ] node {\thecoordinateCounter};
      % Bottom
      \draw[
        xshift = \coordinateShift,
        yshift = -(\leftRightShift),
      ] node {\l};
      % Left
      \draw[
        xshift = -(\leftRightShift),
        yshift = \coordinateShift,
      ] node {\thecoordinateCounter};

      \stepcounter{coordinateCounter}
    }
  }
  \setcounter{coordinateCounter}{1}
}
